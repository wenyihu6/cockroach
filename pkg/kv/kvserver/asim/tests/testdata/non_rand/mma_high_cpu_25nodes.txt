skip_under_ci
----

gen_cluster nodes=25 node_cpu_rate_capacity=8000000000
----

setting split_queue_enabled=false
----

# This workload will be initially evenly distributed over the cluster.
gen_ranges ranges=50 min_key=0 max_key=10000
----

gen_load rate=15000 rw_ratio=0.95 min_block=100 max_block=100 request_cpu_per_access=100 raft_cpu_per_write=20 min_key=0 max_key=10000
----

# Another workload is added over the second half of the keyspace, which is initially
# only on s1-s3.
gen_ranges ranges=50 min_key=10001 max_key=20000 placement_type=skewed
----

gen_load rate=15000 rw_ratio=0.95 min_block=1 max_block=1 request_cpu_per_access=100000 raft_cpu_per_write=20000 min_key=10001 max_key=20000
----

eval duration=25m samples=1 seed=42 cfgs=(mma-only) metrics=(cpu,cpu_util,write_bytes_per_second,replicas,leases)
----
cpu#1: last:  [s1=243855721, s2=153874771, s3=63491939, s4=32781781, s5=61841894, s6=62106310, s7=61895710, s8=31544427, s9=1259297, s10=61948154, s11=61327161, s12=91433733, s13=31384150, s14=31321520, s15=61555377, s16=61696421, s17=31005041, s18=61819152, s19=31283838, s20=997146, s21=31368925, s22=151430263, s23=31558007, s24=1887927, s25=91917705] (stddev=52811886.28, mean=61863454.80, sum=1546586370)
cpu#1: thrash_pct: [s1=5%, s2=5%, s3=18%, s4=10%, s5=3%, s6=3%, s7=3%, s8=1%, s9=0%, s10=3%, s11=3%, s12=3%, s13=2%, s14=1%, s15=2%, s16=3%, s17=1%, s18=3%, s19=2%, s20=0%, s21=2%, s22=4%, s23=2%, s24=0%, s25=4%]  (sum=82%)
cpu_util#1: last:  [s1=0.03, s2=0.02, s3=0.01, s4=0.00, s5=0.01, s6=0.01, s7=0.01, s8=0.00, s9=0.00, s10=0.01, s11=0.01, s12=0.01, s13=0.00, s14=0.00, s15=0.01, s16=0.01, s17=0.00, s18=0.01, s19=0.00, s20=0.00, s21=0.00, s22=0.02, s23=0.00, s24=0.00, s25=0.01] (stddev=0.01, mean=0.01, sum=0)
cpu_util#1: thrash_pct: [s1=5%, s2=5%, s3=18%, s4=10%, s5=3%, s6=3%, s7=3%, s8=1%, s9=0%, s10=3%, s11=3%, s12=3%, s13=2%, s14=1%, s15=2%, s16=3%, s17=1%, s18=3%, s19=2%, s20=0%, s21=2%, s22=4%, s23=2%, s24=0%, s25=4%]  (sum=82%)
leases#1: first: [s1=28, s2=14, s3=4, s4=3, s5=3, s6=2, s7=2, s8=2, s9=2, s10=2, s11=3, s12=2, s13=3, s14=3, s15=2, s16=3, s17=3, s18=3, s19=2, s20=2, s21=2, s22=3, s23=3, s24=3, s25=1] (stddev=5.43, mean=4.00, sum=100)
leases#1: last:  [s1=9, s2=5, s3=2, s4=3, s5=3, s6=4, s7=4, s8=2, s9=2, s10=4, s11=5, s12=6, s13=4, s14=4, s15=4, s16=4, s17=3, s18=4, s19=3, s20=3, s21=4, s22=7, s23=4, s24=3, s25=4] (stddev=1.52, mean=4.00, sum=100)
leases#1: thrash_pct: [s1=0%, s2=0%, s3=15%, s4=7%, s5=7%, s6=0%, s7=0%, s8=0%, s9=0%, s10=0%, s11=0%, s12=0%, s13=0%, s14=0%, s15=0%, s16=0%, s17=0%, s18=0%, s19=0%, s20=0%, s21=0%, s22=0%, s23=0%, s24=0%, s25=0%]  (sum=30%)
replicas#1: first: [s1=56, s2=44, s3=25, s4=16, s5=12, s6=9, s7=8, s8=7, s9=7, s10=7, s11=7, s12=7, s13=7, s14=8, s15=7, s16=8, s17=7, s18=8, s19=7, s20=7, s21=7, s22=7, s23=7, s24=8, s25=7] (stddev=11.97, mean=12.00, sum=300)
replicas#1: last:  [s1=14, s2=13, s3=13, s4=11, s5=11, s6=13, s7=12, s8=12, s9=12, s10=12, s11=12, s12=12, s13=12, s14=11, s15=12, s16=12, s17=11, s18=12, s19=12, s20=12, s21=11, s22=11, s23=12, s24=12, s25=13] (stddev=0.75, mean=12.00, sum=300)
replicas#1: thrash_pct: [s1=0%, s2=0%, s3=0%, s4=0%, s5=0%, s6=0%, s7=0%, s8=0%, s9=0%, s10=0%, s11=0%, s12=0%, s13=0%, s14=0%, s15=0%, s16=0%, s17=0%, s18=0%, s19=0%, s20=0%, s21=0%, s22=0%, s23=0%, s24=0%, s25=0%]  (sum=0%)
write_bytes_per_second#1: last:  [s1=1686, s2=194, s3=1671, s4=3127, s5=7584, s6=9088, s7=9064, s8=10564, s9=12078, s10=9091, s11=12046, s12=12033, s13=12053, s14=10568, s15=10624, s16=9114, s17=12062, s18=9090, s19=12034, s20=13501, s21=10563, s22=9080, s23=10587, s24=9115, s25=10612] (stddev=3534.56, mean=9089.16, sum=227229)
write_bytes_per_second#1: thrash_pct: [s1=21%, s2=15%, s3=27%, s4=26%, s5=47%, s6=67%, s7=65%, s8=62%, s9=47%, s10=64%, s11=45%, s12=54%, s13=50%, s14=68%, s15=41%, s16=40%, s17=74%, s18=93%, s19=48%, s20=56%, s21=50%, s22=39%, s23=52%, s24=68%, s25=77%]  (sum=1296%)
artifacts[mma-only]: e4b63720d59ff0a6
==========================
