skip_under_ci
----

gen_cluster nodes=10 node_cpu_rate_capacity=3000000000
----

# Read only workload, which generates 100_000 request cpu nanos/s evenly over
# the first half of the keyspace, which will be on all stores initially.
gen_ranges ranges=30 min_key=1 max_key=10000 placement_type=even
----

gen_load rate=1000 rw_ratio=1.0 request_cpu_per_access=500000 min_key=1 max_key=10000
----

# Write only workload, which generates no CPU and 100_000 (x replication
# factor) write bytes per second over the second half of the keyspace, which
# are all on s1-s3 initially.
gen_ranges ranges=30 min_key=10001 max_key=20000 placement_type=skewed
----

gen_load rate=20000 rw_ratio=0 min_block=1000 max_block=1000 min_key=10001 max_key=20000
----

setting split_queue_enabled=false
----

eval duration=20m samples=1 seed=42 cfgs=(mma-only,mma-and-count) metrics=(cpu,cpu_util,write_bytes_per_second,replicas,leases)
----
cpu#1: last:  [s1=33097696, s2=32985171, s3=50159512, s4=49952500, s5=66712186, s6=83174923, s7=50165639, s8=50210847, s9=50066250, s10=33232014] (stddev=14954358.50, mean=49975673.80, sum=499756738)
cpu#1: thrash_pct: [s1=198%, s2=210%, s3=103%, s4=42%, s5=117%, s6=134%, s7=161%, s8=215%, s9=44%, s10=273%]  (sum=1497%)
cpu_util#1: last:  [s1=0.01, s2=0.01, s3=0.02, s4=0.02, s5=0.02, s6=0.03, s7=0.02, s8=0.02, s9=0.02, s10=0.01] (stddev=0.00, mean=0.02, sum=0)
cpu_util#1: thrash_pct: [s1=198%, s2=210%, s3=103%, s4=42%, s5=117%, s6=134%, s7=161%, s8=215%, s9=44%, s10=273%]  (sum=1497%)
leases#1: first: [s1=19, s2=11, s3=6, s4=3, s5=3, s6=3, s7=4, s8=3, s9=4, s10=4] (stddev=4.92, mean=6.00, sum=60)
leases#1: last:  [s1=7, s2=5, s3=4, s4=4, s5=8, s6=7, s7=7, s8=9, s9=5, s10=4] (stddev=1.73, mean=6.00, sum=60)
leases#1: thrash_pct: [s1=161%, s2=81%, s3=27%, s4=13%, s5=54%, s6=54%, s7=28%, s8=68%, s9=39%, s10=125%]  (sum=649%)
replicas#1: first: [s1=39, s2=33, s3=23, s4=16, s5=13, s6=12, s7=11, s8=11, s9=11, s10=11] (stddev=9.76, mean=18.00, sum=180)
replicas#1: last:  [s1=17, s2=19, s3=18, s4=18, s5=18, s6=19, s7=19, s8=17, s9=17, s10=18] (stddev=0.77, mean=18.00, sum=180)
replicas#1: thrash_pct: [s1=256%, s2=252%, s3=89%, s4=58%, s5=103%, s6=104%, s7=112%, s8=182%, s9=75%, s10=240%]  (sum=1471%)
write_bytes_per_second#1: last:  [s1=5990851, s2=5997767, s3=5994516, s4=6010637, s5=5995660, s6=5991439, s7=6011161, s8=5995494, s9=6010701, s10=5994514] (stddev=7799.01, mean=5999274.00, sum=59992740)
write_bytes_per_second#1: thrash_pct: [s1=272%, s2=269%, s3=194%, s4=145%, s5=124%, s6=148%, s7=70%, s8=109%, s9=117%, s10=201%]  (sum=1648%)
artifacts[mma-only]: 596edab0c3302f0a
==========================
cpu#1: last:  [s1=83419709, s2=16586666, s3=0, s4=49900416, s5=66711276, s6=99823649, s7=50022500, s8=50178897, s9=50179394, s10=33078191] (stddev=27895182.07, mean=49990069.80, sum=499900698)
cpu#1: thrash_pct: [s1=112%, s2=24%, s3=130%, s4=56%, s5=107%, s6=117%, s7=24%, s8=61%, s9=56%, s10=102%]  (sum=789%)
cpu_util#1: last:  [s1=0.03, s2=0.01, s3=0.00, s4=0.02, s5=0.02, s6=0.03, s7=0.02, s8=0.02, s9=0.02, s10=0.01] (stddev=0.01, mean=0.02, sum=0)
cpu_util#1: thrash_pct: [s1=112%, s2=24%, s3=130%, s4=56%, s5=107%, s6=117%, s7=24%, s8=61%, s9=56%, s10=102%]  (sum=789%)
leases#1: first: [s1=19, s2=11, s3=6, s4=3, s5=3, s6=3, s7=4, s8=3, s9=4, s10=4] (stddev=4.92, mean=6.00, sum=60)
leases#1: last:  [s1=11, s2=3, s3=2, s4=3, s5=6, s6=6, s7=10, s8=7, s9=6, s10=6] (stddev=2.76, mean=6.00, sum=60)
leases#1: thrash_pct: [s1=101%, s2=15%, s3=110%, s4=12%, s5=85%, s6=62%, s7=15%, s8=26%, s9=13%, s10=61%]  (sum=500%)
replicas#1: first: [s1=39, s2=33, s3=23, s4=16, s5=13, s6=12, s7=11, s8=11, s9=11, s10=11] (stddev=9.76, mean=18.00, sum=180)
replicas#1: last:  [s1=19, s2=18, s3=16, s4=18, s5=18, s6=18, s7=18, s8=18, s9=18, s10=19] (stddev=0.77, mean=18.00, sum=180)
replicas#1: thrash_pct: [s1=219%, s2=101%, s3=262%, s4=37%, s5=210%, s6=154%, s7=83%, s8=61%, s9=75%, s10=141%]  (sum=1342%)
write_bytes_per_second#1: last:  [s1=6010851, s2=5992806, s3=5993111, s4=5990568, s5=6012802, s6=6012159, s7=5994369, s8=5995213, s9=5993419, s10=5995086] (stddev=8546.84, mean=5999038.40, sum=59990384)
write_bytes_per_second#1: thrash_pct: [s1=155%, s2=147%, s3=231%, s4=101%, s5=193%, s6=188%, s7=83%, s8=98%, s9=90%, s10=128%]  (sum=1413%)
artifacts[mma-and-count]: 6747cbe0b7f47b3b
==========================
