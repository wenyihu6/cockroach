skip_under_ci
----

gen_cluster nodes=10 node_cpu_rate_capacity=3000000000
----

# Read only workload, which generates 100_000 request cpu nanos/s evenly over
# the first half of the keyspace, which will be on all stores initially.
gen_ranges ranges=30 min_key=1 max_key=10000 placement_type=even
----

gen_load rate=1000 rw_ratio=1.0 request_cpu_per_access=500000 min_key=1 max_key=10000
----

# Write only workload, which generates no CPU and 100_000 (x replication
# factor) write bytes per second over the second half of the keyspace, which
# are all on s1-s3 initially.
gen_ranges ranges=30 min_key=10001 max_key=20000 placement_type=skewed
----

gen_load rate=20000 rw_ratio=0 min_block=1000 max_block=1000 min_key=10001 max_key=20000
----

setting split_queue_enabled=false
----

eval duration=20m samples=1 seed=42 cfgs=(mma-only,mma-and-count) metrics=(cpu,cpu_util,write_bytes_per_second,replicas,leases)
----
cpu#1: last:  [s1=49835297, s2=33161107, s3=50332742, s4=50064589, s5=49919166, s6=33362834, s7=66481317, s8=50013078, s9=66793086, s10=50134434] (stddev=10555335.13, mean=50009765.00, sum=500097650)
cpu#1: thrash_pct: [s1=187%, s2=130%, s3=150%, s4=131%, s5=123%, s6=127%, s7=82%, s8=124%, s9=150%, s10=209%]  (sum=1412%)
cpu_util#1: last:  [s1=0.02, s2=0.01, s3=0.02, s4=0.02, s5=0.02, s6=0.01, s7=0.02, s8=0.02, s9=0.02, s10=0.02] (stddev=0.00, mean=0.02, sum=0)
cpu_util#1: thrash_pct: [s1=187%, s2=130%, s3=150%, s4=131%, s5=123%, s6=127%, s7=82%, s8=124%, s9=150%, s10=209%]  (sum=1412%)
leases#1: first: [s1=19, s2=11, s3=6, s4=3, s5=3, s6=3, s7=4, s8=3, s9=4, s10=4] (stddev=4.92, mean=6.00, sum=60)
leases#1: last:  [s1=10, s2=5, s3=3, s4=5, s5=7, s6=2, s7=9, s8=5, s9=10, s10=4] (stddev=2.72, mean=6.00, sum=60)
leases#1: thrash_pct: [s1=53%, s2=40%, s3=26%, s4=25%, s5=26%, s6=36%, s7=14%, s8=25%, s9=15%, s10=24%]  (sum=285%)
replicas#1: first: [s1=39, s2=33, s3=23, s4=16, s5=13, s6=12, s7=11, s8=11, s9=11, s10=11] (stddev=9.76, mean=18.00, sum=180)
replicas#1: last:  [s1=17, s2=18, s3=17, s4=19, s5=18, s6=17, s7=20, s8=19, s9=16, s10=19] (stddev=1.18, mean=18.00, sum=180)
replicas#1: thrash_pct: [s1=125%, s2=144%, s3=111%, s4=81%, s5=53%, s6=89%, s7=47%, s8=47%, s9=89%, s10=119%]  (sum=904%)
write_bytes_per_second#1: last:  [s1=5991400, s2=6012722, s3=5992586, s4=5992337, s5=5992707, s6=5994881, s7=6016389, s8=6012639, s9=5994069, s10=5995047] (stddev=9561.46, mean=5999477.70, sum=59994777)
write_bytes_per_second#1: thrash_pct: [s1=160%, s2=135%, s3=153%, s4=129%, s5=93%, s6=92%, s7=45%, s8=53%, s9=69%, s10=100%]  (sum=1028%)
artifacts[mma-only]: 8245c4eafb3bccc2
==========================
cpu#1: last:  [s1=66631716, s2=50037786, s3=66824303, s4=49959101, s5=33278314, s6=50000833, s7=50017016, s8=33765709, s9=49806061, s10=49744795] (stddev=10502113.30, mean=50006563.40, sum=500065634)
cpu#1: thrash_pct: [s1=109%, s2=108%, s3=183%, s4=140%, s5=182%, s6=25%, s7=104%, s8=117%, s9=63%, s10=216%]  (sum=1248%)
cpu_util#1: last:  [s1=0.02, s2=0.02, s3=0.02, s4=0.02, s5=0.01, s6=0.02, s7=0.02, s8=0.01, s9=0.02, s10=0.02] (stddev=0.00, mean=0.02, sum=0)
cpu_util#1: thrash_pct: [s1=109%, s2=108%, s3=183%, s4=140%, s5=182%, s6=25%, s7=104%, s8=117%, s9=63%, s10=216%]  (sum=1248%)
leases#1: first: [s1=19, s2=11, s3=6, s4=3, s5=3, s6=3, s7=4, s8=3, s9=4, s10=4] (stddev=4.92, mean=6.00, sum=60)
leases#1: last:  [s1=10, s2=8, s3=6, s4=4, s5=5, s6=4, s7=5, s8=4, s9=6, s10=8] (stddev=1.95, mean=6.00, sum=60)
leases#1: thrash_pct: [s1=90%, s2=97%, s3=94%, s4=48%, s5=84%, s6=13%, s7=60%, s8=60%, s9=25%, s10=157%]  (sum=729%)
replicas#1: first: [s1=39, s2=33, s3=23, s4=16, s5=13, s6=12, s7=11, s8=11, s9=11, s10=11] (stddev=9.76, mean=18.00, sum=180)
replicas#1: last:  [s1=18, s2=20, s3=19, s4=18, s5=15, s6=18, s7=19, s8=18, s9=18, s10=17] (stddev=1.26, mean=18.00, sum=180)
replicas#1: thrash_pct: [s1=176%, s2=201%, s3=188%, s4=87%, s5=266%, s6=24%, s7=169%, s8=119%, s9=32%, s10=361%]  (sum=1623%)
write_bytes_per_second#1: last:  [s1=5996414, s2=5994699, s3=6012040, s4=5993019, s5=6012872, s6=6009588, s7=5997838, s8=5994621, s9=5995520, s10=5991540] (stddev=7856.09, mean=5999815.10, sum=59998151)
write_bytes_per_second#1: thrash_pct: [s1=179%, s2=238%, s3=186%, s4=162%, s5=223%, s6=67%, s7=150%, s8=120%, s9=121%, s10=232%]  (sum=1678%)
artifacts[mma-and-count]: 290d70f71752807a
==========================
